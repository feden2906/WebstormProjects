<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>User Details</title>

    <link rel="stylesheet" href="main.css">

</head>
<body>

<script>

    let url = new URL(location);
    let getUser = url.searchParams.get('user');
    let user = JSON.parse(getUser);

    let userInfo = document.createElement('div');
    userInfo.classList.add('us-details');


    userInfo.innerText= ` User info

    id:${user.id } - Name: ${user.name};
    Username: ${user.username};
    email: ${user.email};
    address:
    street:${user.address.street} / suite: ${user.address.suite} / city: ${user.address.city};
    zipcode: ${user.address.zipcode};
    geo: lat:${user.address.geo.lat} / lng:${user.address.geo.lng};
    phone: ${user.phone};
    website: ${user.website};
    company: ${user.company.name};
    catchPhrase: ${user.company.catchPhrase};
    bs: ${user.company.bs};
    `;
    document.body.append(userInfo);

    let btnPost = document.createElement('button');
    btnPost.innerText = 'post of current user';
    btnPost.classList.add('btn', 'btn-post');
    userInfo.append(btnPost);


    btnPost.addEventListener("click", function (){
        fetch(`https://jsonplaceholder.typicode.com/users/${user.id}/posts`)
            .then (value => value.json())
            .then(posts => {
                document.body.innerHTML = '';// ....................>>>>>>>>>щоб не повторювався div 'user-box'
                let allPostCont = document.createElement('div');
                allPostCont.classList.add('user-box');


                for (const post of posts) {

                    let postBox = document.createElement('div');
                    postBox.classList.add('post-box');

                    let userPosts = document.createElement('p');
                    userPosts.innerText = `${post.title}`;

                    let btnPostDet = document.createElement('button');
                    btnPostDet.classList.add('btn');
                    btnPostDet.innerText = 'Post Details';

                    postBox.append(userPosts);
                    postBox.append(btnPostDet);
                    allPostCont.append(postBox);
                    document.body.append(allPostCont);

                    btnPostDet.onclick = function (){
                        location.href = `post-details.html?post=${JSON.stringify(post)}`; //=======>>>>
                    };

                }

            });

    });

</script>

</body>
</html>